<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8 />
        <title>Road tripping lolz</title>
        <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='script/randomColor.js'></script>
        <script src='https://api.mapbox.com/mapbox.js/v2.2.1/mapbox.js'></script>
    <script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
        <link href='https://api.mapbox.com/mapbox.js/v2.2.1/mapbox.css' rel='stylesheet' />
        <style>
              body { margin:0; padding:0; }
                #map { position:absolute; top:0; bottom:0; width:100%; }
            </style>
    </head>
    <body>

        <div id='map'></div>

        <script>
            var baseUri = 'https://api.mapbox.com/v4/'
            var mapId = 'pikariop.e3bba626';
            L.mapbox.accessToken = 'pk.eyJ1IjoicGlrYXJpb3AiLCJhIjoiMTRlNGM0M2U5MzBhOGE1NDkzNDcyZjVmMDVjODc4YjcifQ.lAiBZgfNKzEuCLiiPJlh_g';
            var mapUri = baseUri + mapId + '/{z}/{x}/{y}.png?access_token=' + L.mapbox.accessToken;
            var attribution = '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>';
            //var baseCoords = [37.7739, -122.4312];

            var mapboxTiles = L.tileLayer(mapUri, {
                attribution: attribution,
            });

            var map = L.map('map', mapId)
                .addLayer(mapboxTiles);

    var customLayer = L.geoJson(null, {
        // http://leafletjs.com/reference.html#geojson-style
        style: function(feature) {
        return {
            color: randomColor({
                hue: 'dark',
                format: 'rgb'
            }),
            opacity: 1
        };
        }
    }).on('ready', function() {
            map.fitBounds(runLayer.getBounds());
        });

    var basePath = 'route/';

    var runLayer = omnivore.gpx('alpakke.gpx', null, customLayer);

    runLayer.addTo(map);

    [
        'bodom.gpx',
        'fhf.gpx',
        'laavulta.gpx',
        'itae.gpx'
    ].forEach(
        function (value) {
            omnivore.gpx(
                basePath + value,
                null,
                customLayer
            ).addTo(map);
        }
    );
        </script>

    </body>
</html>
